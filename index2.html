<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xác định tọa độ hình ảnh</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }

        .header {
            background-color: #333;
            color: white;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            text-align: center;
        }

        .image-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }

        .image-wrapper {
            position: relative;
            margin-bottom: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            background-color: white;
            border-radius: 5px;
            overflow: hidden;
        }

        .image-wrapper img {
            max-width: 100%;
            height: auto;
            display: block;
            cursor: crosshair;
        }

        .image-title {
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px;
            position: absolute;
            bottom: 0;
            width: 100%;
            box-sizing: border-box;
            font-size: 14px;
            opacity: 0.9;
        }

        .popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .popup-content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            max-width: 400px;
            width: 80%;
            position: relative;
        }

        .popup-close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            cursor: pointer;
            color: #333;
        }

        .coordinate-display {
            font-size: 16px;
            margin-bottom: 15px;
        }

        .coordinates {
            font-weight: bold;
            color: #0066cc;
        }

        .copy-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 8px 15px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin: 5px 2px;
            cursor: pointer;
            border-radius: 4px;
        }

        .hidden {
            display: none;
        }

        .copy-success {
            color: green;
            margin-left: 10px;
            display: none;
        }

        .hotspot-info {
            margin-top: 15px;
            padding: 10px;
            background-color: #f9f9f9;
            border-left: 3px solid #0066cc;
        }

        .instruction {
            margin-bottom: 20px;
            padding: 10px;
            background-color: #fff3cd;
            border-left: 3px solid #ffc107;
            border-radius: 3px;
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>Trình xác định tọa độ hình ảnh</h1>
        <p>Click vào hình ảnh để xác định tọa độ theo %</p>
    </div>

    <div class="instruction">
        <p>Hướng dẫn: Click vào bất kỳ vị trí nào trên hình ảnh để hiển thị tọa độ top và left theo phần trăm. Bạn có
            thể sao chép tọa độ để sử dụng cho hotspot trong HTML.</p>
    </div>

    <div class="image-container" id="imageContainer">
        <!-- Hình ảnh sẽ được tạo động bằng JavaScript -->
        <p>Đang tải hình ảnh, vui lòng đợi...</p>
    </div>

    <div class="popup" id="popup">
        <div class="popup-content">
            <span class="popup-close" id="popupClose">&times;</span>
            <h2>Tọa độ vị trí</h2>
            <div class="coordinate-display">
                Tọa độ: <span class="coordinates" id="coordinates">top: 0%, left: 0%</span>
                <button class="copy-button" id="copyButton">Sao chép</button>
                <span class="copy-success" id="copySuccess">Đã sao chép!</span>
            </div>
            <div class="hotspot-info">
                <h3>Mã HTML cho hotspot:</h3>
                <pre
                    id="hotspotCode">&lt;div class="hotspot" style="top: 0%; left: 0%;" data-title="Tiêu đề" data-content="Nội dung"&gt;&lt;/div&gt;</pre>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Đường dẫn thư mục chứa hình ảnh
            const imagePath = '/Users/jpeople/Documents/lang/korean/kiip/intermediate1/book/image/';

            // Danh sách hình ảnh (trong môi trường thực, sẽ lấy từ server)
            // Do không thể trực tiếp đọc từ thư mục trong JavaScript client-side,
            // bạn cần liệt kê tên file hoặc sử dụng server-side để đọc thư mục

            // Giả lập danh sách hình ảnh từ thư mục
            const simulatedImageList = [
                'page-36.webp', 'page-37.webp', 'page-38.webp', 'page-39.webp', 'page-40.webp',
                'page-41.webp', 'page-42.webp', 'page-43.webp', 'page-44.webp', 'page-45.webp', 'page-46.webp'
            ];

            const imageContainer = document.getElementById('imageContainer');
            imageContainer.innerHTML = ''; // Xóa thông báo "đang tải"

            // Tạo phần tử cho mỗi hình ảnh
            simulatedImageList.forEach((imageName, index) => {
                const imageWrapper = document.createElement('div');
                imageWrapper.className = 'image-wrapper';

                const img = document.createElement('img');
                img.src = imagePath + imageName; // Sử dụng đường dẫn tương đối
                img.alt = `Hình ảnh ${index + 1}`;
                img.setAttribute('data-filename', imageName);

                const imageTitle = document.createElement('div');
                imageTitle.className = 'image-title';
                imageTitle.textContent = imageName;

                imageWrapper.appendChild(img);
                imageWrapper.appendChild(imageTitle);
                imageContainer.appendChild(imageWrapper);

                // Thêm sự kiện click cho hình ảnh
                img.addEventListener('click', function (e) {
                    const rect = this.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;

                    const percentX = Math.round((x / rect.width) * 100);
                    const percentY = Math.round((y / rect.height) * 100);

                    const filename = this.getAttribute('data-filename');

                    // Hiển thị popup với tọa độ
                    const coordinates = document.getElementById('coordinates');
                    coordinates.textContent = `top: ${percentY}%, left: ${percentX}%`;

                    // Cập nhật mã HTML cho hotspot
                    const hotspotCode = document.getElementById('hotspotCode');
                    hotspotCode.textContent = `<div class="hotspot" style="top: ${percentY}%; left: ${percentX}%;" data-title="Tiêu đề" data-content="Nội dung"></div>`;

                    // Hiển thị popup
                    document.getElementById('popup').style.display = 'flex';
                });
            });

            // Xử lý sự kiện đóng popup
            document.getElementById('popupClose').addEventListener('click', function () {
                document.getElementById('popup').style.display = 'none';
            });

            // Xử lý sự kiện click bên ngoài popup để đóng
            document.getElementById('popup').addEventListener('click', function (e) {
                if (e.target === this) {
                    this.style.display = 'none';
                }
            });

            // Xử lý sự kiện sao chép tọa độ
            document.getElementById('copyButton').addEventListener('click', function () {
                const coordinates = document.getElementById('coordinates').textContent;
                const hotspotCode = document.getElementById('hotspotCode').textContent;

                // Sao chép mã HTML hotspot vào clipboard
                navigator.clipboard.writeText(hotspotCode).then(function () {
                    // Hiển thị thông báo đã sao chép
                    const copySuccess = document.getElementById('copySuccess');
                    copySuccess.style.display = 'inline';

                    // Ẩn thông báo sau 2 giây
                    setTimeout(function () {
                        copySuccess.style.display = 'none';
                    }, 2000);
                });
            });
        });
    </script>
</body>

</html>